<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Integrity Checkers</title>
  <meta name="description" content="In this guide, let’s go over the integrity checkers in mojito in detail.  Integrity checkers perform checks on the translations against the source strings an...">

  <link rel="stylesheet" href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://opensource.box.com/mojito/docs/guides/integrity-checkers/">
  <link rel="alternate" type="application/rss+xml" title="mojito" href="http://opensource.box.com/mojito/feed.xml">

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <a class="site-title" href="/"><img src="/images/logo.png" class="logo" alt="mojito"></a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        <a class="page-link" href="/docs/guides/getting-started/">Getting Started</a>
        <a class="page-link" href="/docs/">Documentation</a>
        <a class="page-link" href="https://github.com/box/mojito">GitHub</a>
        <span class="site-search">
          <input type="text" id="algolia-doc-search">
        </span>
      </div>
    </nav>

  </div>

</header>

<!-- at the end of the BODY -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: 'bedffa81eeaf678861a2046ab3fc054b',
indexName: 'boxmojito',
inputSelector: '#algolia-doc-search'
});
</script>

    

    <script src="/bower_components/jquery/dist/jquery.min.js"></script>
<script src="/bower_components/anchor-js/anchor.js"></script>
<script src="/bower_components/bootstrap/js/affix.js"></script>
<script type="text/javascript">

  document.addEventListener('DOMContentLoaded', function() {
    anchors.add();

    $('.post-title, .doc-content h1, .doc-content h2, .doc-content h3').each(function(index, element) {
      var el = $(element);
      var title = el.text();
      var id = el.attr('id');
      var tag = el.prop('tagName');
      var titleEl = $('<div>').append(
        $('<a>')
          .attr('href', '#' + id)
          .addClass(tag.toLowerCase())
          .text(title));
      $('.table-of-content').append(titleEl);
    });
});
</script>

<div class="table-of-content" data-spy="affix" data-offset-top="40" data-offset-bottom="300">
</div>

<article class="post">
  <div class="wrapper">
  <header class="post-header">
    <h1 class="post-title">Integrity Checkers</h1>
  </header>
  <div class="post-content">
    <div class="doc-content">
      <p>In this guide, let’s go over the integrity checkers in <span><font color="green">mojito</font><span> in detail.  Integrity checkers perform checks on the translations against the source strings and reject the translations with errors.  This prevents translations with errors from being used in localized resource files which can lead to build faiilure or errors in application.</span></span></p>

<p>We use <code class="highlighter-rouge">mojito-cli</code> to configure integrity checkers in a repository.  Integrity checkers can be configured when you create and update repository in <span><font color="green">mojito</font><span> with <code class="highlighter-rouge">-it</code> parameter.  You can set integrity checker for each file extension of resource files.  For example, <code class="highlighter-rouge">-it resw:COMPOSITE_FORMAT,xlf:PRINTF_LIKE</code>.</span></span></p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>    mojito repo-create -n MyRepo -it <span class="s2">"properties:MESSAGE_FORMAT"</span> -l de-DE es-ES
    
    mojito repo-update -n MyRepo -it <span class="s2">"properties:MESSAGE_FORMAT"</span> -l de-DE es-ES
</code></pre>
</div>

<h3 id="available-integrity-checkers">Available Integrity Checkers</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Integrity Checker</th>
      <th style="text-align: left">Recommended File Extensions   </th>
      <th style="text-align: left">File Format</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">COMPOSITE_FORMAT</td>
      <td style="text-align: left">resw, resx</td>
      <td style="text-align: left">RESW, RESX</td>
    </tr>
    <tr>
      <td style="text-align: left">MESSAGE_FORMAT</td>
      <td style="text-align: left">properties</td>
      <td style="text-align: left">Java Properties</td>
    </tr>
    <tr>
      <td style="text-align: left">PRINTF_LIKE</td>
      <td style="text-align: left">xml, strings,</td>
      <td style="text-align: left">Android Strings, iOS/Mac Strings,</td>
    </tr>
    <tr>
      <td style="text-align: left">SIMPLE_PRINTF_LIKE</td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">TRAILING_WHITESPACE    </td>
      <td style="text-align: left"> </td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<h3 id="composite-format-integrity-checker">Composite Format Integrity Checker</h3>

<p>Composite format integrity checker validates that the placeholders of format <code class="highlighter-rouge"><span class="p">{</span><span class="err">some-identifier</span><span class="p">}</span></code> in the source string exists in the translation.</p>

<p>The translation gets rejected if any placeholder in the source string is missing in the translation.  There can be multiple placeholders in the source string.  The order of the placeholders can change in the translation.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Source String    </th>
      <th style="text-align: left">Translation    </th>
      <th style="text-align: center">Checker</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Hello {0}!</td>
      <td style="text-align: left">¡Hola {0}!</td>
      <td style="text-align: center">OK</td>
    </tr>
    <tr>
      <td style="text-align: left">Hello {0}!</td>
      <td style="text-align: left">¡Hola!</td>
      <td style="text-align: center">FAIL</td>
    </tr>
    <tr>
      <td style="text-align: left">{0.00}% used</td>
      <td style="text-align: left">{0.00} used</td>
      <td style="text-align: center">OK</td>
    </tr>
    <tr>
      <td style="text-align: left">{0.00}% used</td>
      <td style="text-align: left">{0} used</td>
      <td style="text-align: center">FAIL</td>
    </tr>
    <tr>
      <td style="text-align: left">{0} with {1}</td>
      <td style="text-align: left">{1} con {0}</td>
      <td style="text-align: center">OK</td>
    </tr>
  </tbody>
</table>

<h3 id="message-format-integrity-checker">Message Format Integrity Checker</h3>

<p>Message format integrity checker validates message format in the translation against <a href="http://icu-project.org/apiref/icu4j/com/ibm/icu/text/MessageFormat.html">icu4j Message Format</a>.</p>

<p>The translation gets rejected if any placeholder in the source string is missing in the translation.  There can be multiple placeholders in the source string.  The order of the placeholders can change in the translation.</p>

<p>Missing curly braces or translating elements within the curly braces also cause the translation to be rejected.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Source String</th>
      <th style="text-align: left">Translation</th>
      <th style="text-align: center">Checker</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">{numFiles, plural, one{one file} other{# files}}   </td>
      <td style="text-align: left">{numFiles, plural, one{un fichier} other{# fichiers}}</td>
      <td style="text-align: center">OK</td>
    </tr>
    <tr>
      <td style="text-align: left">{numFiles, plural, one{one file} other{# files}}   </td>
      <td style="text-align: left">{numFiles, plural, one{un fichier} other{# fichiers}</td>
      <td style="text-align: center">FAIL</td>
    </tr>
    <tr>
      <td style="text-align: left">{numFiles, plural, one{one file} other{# files}}   </td>
      <td style="text-align: left">{numFiles, plural, un{un fichier} autre{# fichiers}}</td>
      <td style="text-align: center">FAIL</td>
    </tr>
  </tbody>
</table>

<h3 id="printf-like-integrity-checker">Printf-Like Integrity Checker</h3>

<p>Printf-like integrity checker validates that the placeholders in the source string exists in the translation.  The placeholders are in the form of printf specifiers.</p>

<p>The translation gets rejected if any placeholder in the source string is missing in the translation or the specifier is modified.  There can be multiple placeholders in the source string.  The order of the placeholders can change in the translation.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Source String</th>
      <th style="text-align: left">Translation</th>
      <th style="text-align: center">Checker</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Hello %@!</td>
      <td style="text-align: left">¡Hola %@!</td>
      <td style="text-align: center">OK</td>
    </tr>
    <tr>
      <td style="text-align: left">%1$s of %2$s</td>
      <td style="text-align: left">%2$s의 %1$s</td>
      <td style="text-align: center">OK</td>
    </tr>
    <tr>
      <td style="text-align: left">%1$d files and %2$d folders</td>
      <td style="text-align: left">%1$d fichiers et dossiers</td>
      <td style="text-align: center">FAIL</td>
    </tr>
    <tr>
      <td style="text-align: left">%1$d files and %2$d folders   </td>
      <td style="text-align: left">%1$d fichiers et %2$s dossiers</td>
      <td style="text-align: center">FAIL</td>
    </tr>
  </tbody>
</table>

<h3 id="simple-printf-like-integrity-checker">Simple Printf-Like Integrity Checker</h3>

<p>Simple Printf-like integrity checker validates that the placeholders in the source string exists in the translation.  The placeholders are in the form of <code class="highlighter-rouge">%{number}</code>, for example, %1, %2, %3, etc.</p>

<p>The translation gets rejected if any placeholder in the source string is missing in the translation.  There can be multiple placeholders in the source string.  The order of the placeholders can change in the translation.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Source String</th>
      <th style="text-align: left">Translation</th>
      <th style="text-align: center">Checker</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Hello %1!</td>
      <td style="text-align: left">¡Hola %1!</td>
      <td style="text-align: center">OK</td>
    </tr>
    <tr>
      <td style="text-align: left">%1 of %2</td>
      <td style="text-align: left">%2의 %1</td>
      <td style="text-align: center">OK</td>
    </tr>
    <tr>
      <td style="text-align: left">%1 files and %2 folders</td>
      <td style="text-align: left">%1 fichiers et dossiers</td>
      <td style="text-align: center">FAIL</td>
    </tr>
    <tr>
      <td style="text-align: left">%1 files and %2 folders   </td>
      <td style="text-align: left">fichiers et %2 dossiers</td>
      <td style="text-align: center">FAIL</td>
    </tr>
  </tbody>
</table>

<h3 id="trailing-whitespace-integrity-checker">Trailing Whitespace Integrity Checker</h3>

<p>Trailing whitespace integrity checker validates that the trailing whitespaces in the source string exists in the translation.</p>

<p>The translation gets rejected if any traingling whitespaces in the source string is missing in the translation.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Source String</th>
      <th style="text-align: left">Translation</th>
      <th style="text-align: center">Checker</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Hello %@![space][newline]</td>
      <td style="text-align: left">¡Hola %@![space][newline]</td>
      <td style="text-align: center">OK</td>
    </tr>
    <tr>
      <td style="text-align: left">%1$d files and %2$d folders[space]</td>
      <td style="text-align: left">%1$d fichiers et %2$s dossiers</td>
      <td style="text-align: center">FAIL</td>
    </tr>
    <tr>
      <td style="text-align: left">%1$d files and %2$d folders[newline]  </td>
      <td style="text-align: left">%1$d fichiers et %2$s dossiers</td>
      <td style="text-align: center">FAIL</td>
    </tr>
    <tr>
      <td style="text-align: left">%1 files and %2 folders[space][newline]</td>
      <td style="text-align: left">%1 fichiers et dossiers[newline][space]  </td>
      <td style="text-align: center">FAIL</td>
    </tr>
  </tbody>
</table>

<h3 id="handling-rejected-translations">Handling Rejected Translations</h3>

<p>While importing offline translations, the integrity checker catches errors and reject translations with errors.  The number of rejected translations show up in the Repository page.</p>

<p><img src="./images/repository-rejected-translation.png" alt="Repository with Rejected Translation" /></p>

<p>Clicking on the number of rejected translations loads the Workbench with rejected translation.  You can correct the translation and change its status to <code class="highlighter-rouge">Needs Review</code> or <code class="highlighter-rouge">Accepted</code>.</p>

<p><img src="./images/workbench-warning.png" alt="Workbench with Rejected Translation" /></p>


    </div>
</div>
</div>


<!--
    <div class="page-content">
      <div class="wrapper">

      </div>
    </div>
-->

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">mojito</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Need to contact us directly? Email <a href="mailto:oss@box.com">oss@box.com</a> and be sure to include the name of this project in the subject.</li>
          <li></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          <li><a href="https://github.com/Box/Mojito/issues"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">GitHub Issues</span></a></li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>An open sourced automation platform that enables continuous localization for software development
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
